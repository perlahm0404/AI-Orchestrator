{
  "project": "ai-orchestrator",
  "sequence": 3,
  "fingerprints": [],
  "features": [
    {
      "id": "PHASE2B-002",
      "description": "Implement ChromaKnowledgeStore for vector-based semantic search of Knowledge Objects. Create hybrid search combining semantic vectors with tag-based filtering. Expected improvement: +20-30% KO discovery.",
      "file": "knowledge/semantic_search.py",
      "status": "complete",
      "tests": [
        "tests/test_semantic_search.py"
      ],
      "passes": true,
      "error": null,
      "attempts": 23,
      "last_attempt": "2026-02-07T20:49:02.051202",
      "completed_at": "2026-02-07T21:15:00.000000",
      "completion_promise": "CHROMA_COMPLETE",
      "max_iterations": 50,
      "verification_verdict": "PASS",
      "files_actually_changed": [
        "knowledge/semantic_search.py",
        "tests/test_semantic_search.py",
        "knowledge/service.py"
      ],
      "priority": "P0",
      "bug_count": null,
      "is_new": false,
      "type": "feature",
      "branch": "feature/phase2b-2-chroma-semantic-search",
      "agent": "featurebuilder",
      "requires_approval": false,
      "source": null,
      "discovered_by": null,
      "fingerprint": null,
      "adr_context": null,
      "creates_adr": null,
      "pm_validated": null,
      "pm_feedback": null,
      "pm_outcome_metrics": null,
      "cmo_reviewed": null,
      "cmo_priority": null,
      "cmo_experiment_id": null,
      "governance_risk_level": null,
      "governance_approved": null,
      "affects_user_experience": false,
      "is_gtm_related": false,
      "touches_phi_code": false,
      "evidence_refs": null,
      "merge_order": 1,
      "depends_on": [],
      "acceptance_criteria": [
        "ChromaKnowledgeStore class implemented",
        "20+ TDD tests passing",
        "Hybrid semantic + tag search working",
        "Performance < 100ms per query",
        "Backward compatibility maintained",
        "Integration with knowledge/service.py complete"
      ],
      "tags": [
        "phase2b",
        "semantic-search",
        "chroma",
        "knowledge-objects",
        "vector-db",
        "tdd"
      ]
    },
    {
      "id": "PHASE2B-003",
      "description": "Implement AgentCostTracker as the source of truth for all agent costs. This prevents double-counting when Langfuse reads cost data. Includes per-operation cost recording, multi-agent aggregation, and SessionState integration.",
      "file": "orchestration/agent_cost_tracker.py",
      "status": "pending",
      "tests": [
        "tests/test_agent_cost_tracking.py",
        "tests/test_specialist_cost_tracking.py"
      ],
      "passes": false,
      "error": null,
      "attempts": 0,
      "last_attempt": null,
      "completed_at": null,
      "completion_promise": "COST_TRACKING_COMPLETE",
      "max_iterations": 50,
      "verification_verdict": null,
      "files_actually_changed": [],
      "priority": "P1",
      "bug_count": null,
      "is_new": true,
      "type": "feature",
      "branch": "feature/phase2b-3-cost-tracking",
      "agent": "featurebuilder",
      "requires_approval": false,
      "source": null,
      "discovered_by": null,
      "fingerprint": null,
      "adr_context": null,
      "creates_adr": null,
      "pm_validated": null,
      "pm_feedback": null,
      "pm_outcome_metrics": null,
      "cmo_reviewed": null,
      "cmo_priority": null,
      "cmo_experiment_id": null,
      "governance_risk_level": null,
      "governance_approved": null,
      "affects_user_experience": false,
      "is_gtm_related": false,
      "touches_phi_code": false,
      "evidence_refs": null,
      "merge_order": 2,
      "depends_on": [
        "PHASE2B-002"
      ],
      "acceptance_criteria": [
        "AgentCostTracker class implemented",
        "All 1,057 tests passing",
        "Per-operation cost recording working",
        "Multi-agent cost aggregation functioning",
        "SessionState integration complete",
        "Cost data available for Langfuse to read",
        "IterationLoop hooks added (lines 957-1097)"
      ],
      "tags": [
        "phase2b",
        "cost-tracking",
        "source-of-truth",
        "multi-agent",
        "monitoring"
      ]
    },
    {
      "id": "PHASE2B-001",
      "description": "Complete LangfuseMonitor implementation for real-time cost dashboard and monitoring. CRITICAL: Must read costs from AgentCostTracker (never estimate independently) to prevent double-counting. Includes trace/span lifecycle, dashboard integration, and Langfuse cloud integration.",
      "file": "orchestration/monitoring/langfuse_integration.py",
      "status": "pending",
      "tests": [
        "tests/test_langfuse_integration.py"
      ],
      "passes": false,
      "error": null,
      "attempts": 0,
      "last_attempt": null,
      "completed_at": null,
      "completion_promise": "LANGFUSE_COMPLETE",
      "max_iterations": 50,
      "verification_verdict": null,
      "files_actually_changed": [],
      "priority": "P2",
      "bug_count": null,
      "is_new": true,
      "type": "feature",
      "branch": "feature/phase2b-1-langfuse-monitoring",
      "agent": "featurebuilder",
      "requires_approval": false,
      "source": null,
      "discovered_by": null,
      "fingerprint": null,
      "adr_context": null,
      "creates_adr": null,
      "pm_validated": null,
      "pm_feedback": null,
      "pm_outcome_metrics": null,
      "cmo_reviewed": null,
      "cmo_priority": null,
      "cmo_experiment_id": null,
      "governance_risk_level": null,
      "governance_approved": null,
      "affects_user_experience": false,
      "is_gtm_related": false,
      "touches_phi_code": false,
      "evidence_refs": null,
      "merge_order": 3,
      "depends_on": [
        "PHASE2B-003"
      ],
      "acceptance_criteria": [
        "LangfuseMonitor class fully implemented",
        "All 936 tests passing",
        "Trace/span lifecycle methods working",
        "Reads costs from AgentCostTracker (NOT estimates)",
        "Dashboard metrics aggregation functioning",
        "Langfuse cloud integration working",
        "Thread-safe for concurrent agents",
        "IterationLoop hooks added (lines 630-785)"
      ],
      "tags": [
        "phase2b",
        "langfuse",
        "monitoring",
        "dashboard",
        "cost-aggregation"
      ]
    }
  ]
}