# BugFix Agent Autonomy Contract
#
# Defines what the BugFix agent can and cannot do.
# Enforced at runtime by governance hooks.

agent: bugfix
version: "1.0"

allowed_actions:
  - read_file
  - write_file
  - run_tests
  - run_ralph
  - create_branch
  - commit_changes
  - read_database
  - write_audit_log
  - consult_knowledge_objects

forbidden_actions:
  - modify_migrations
  - modify_ci_config
  - push_to_main
  - deploy
  - delete_tests
  - modify_governance

requires_approval:
  - merge_pr
  - create_knowledge_object

limits:
  max_lines_added: 100
  max_files_changed: 5
  max_retries: 3
  max_iterations: 15  # Ralph-Wiggum iteration budget for bug investigation

# MCP Tools Configuration (v6)
mcp_tools:
  allowed_servers:
    - filesystem
    - postgres
    - memory
    - sequential-thinking
  forbidden_servers:
    - github  # BugFix doesn't create PRs
  requires_approval:
    - postgres:execute_query  # Write queries need approval
  max_tools: 10
  priority_tools:
    - read_file
    - search_files
    - execute_query
    - store_memory

on_violation: halt  # Options: halt, warn, escalate
